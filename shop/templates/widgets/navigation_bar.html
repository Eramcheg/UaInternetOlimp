{% block content %}

{% load static %}
{% load i18n %}
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>User Auth</title>
    <script src="https://kit.fontawesome.com/ba99d1b9b2.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'css/base.css' %}">

</head>
<div class="this-page" >
    <div class="toolbar large">
        <a></a>
        <a></a>
        <a></a>
        <a></a>
        <a></a>
        <div class="logo" >
            <img class="imag" src="{% static "LogoOlimp.png" %}"/>
        </div>
        <a></a>
        <a></a>
        <a href="{% url 'home' %}" class="link"> Головна </a>
        <div class="dropdown-container">
            <a class="link materials-dropdown-trigger">Матеріали</a>
            <div id="dropdownMenu" class="menu">
                <ul>
                    <li><a href="{% url "materials" %}?page=terms" class="dropdown-link" title="Умови">Умови</a></li>
                    <li><a href="{% url "materials" %}?page=solutions" class="dropdown-link" title="Рішення">Рішення</a></li>
                    <li><a href="{% url "materials" %}?page=results" class="dropdown-link" title="Результати">Результати</a></li>
                    <li><a href="{% url "materials" %}?page=other" class="dropdown-link" title="Інше">Інше</a></li>
                </ul>
            </div>
        </div>
        <a href="{% url 'news_main' %}" class="link"> Новини </a>
        <a href="{% url 'home' %}" class="link"> Контакти </a>
        {% if user.email == "uainternetolimp@gmail.com" %}

            <a href="{% url 'admin_tools' feature_name='home' %}" class="link"> Адмін </a>
        {% endif %}
{#        {% if role == "Student" %}#}
{#            <a href="{% url 'student_tools' feature_name='home' %}" class="link"> Меню учасника олімпіади </a>#}
{#        {% elif role == "Jury" %}#}
{#            <a href="{% url 'jury_tools' feature_name='home' %}" class="link"> Меню члена жюри </a>#}
{#        {% endif %}#}
            <a></a>

        {% if user.is_authenticated %}
            <a></a>
        {% else %}
            <a href="{% url 'login'%}" class="link-auth"><img src="{% static "icons/Vector.png" %}"> Авторизація</a>
            <a></a>
            <a></a>
        {% endif %}
            <a></a>
            <a></a>
            <a></a>
        <span class="icons-container">
            {% if user.is_authenticated %}
                <div class="dropdown-container-account">
                    <span class="icon-link account-link-wrapper account-dropdown-trigger">
                        <a id="account-icon">
                            <div id="account-icon-photo">
                               <span>  </span>
                            </div>
                            <span style="margin-top: 6px">
                                {% if user.username %}
                                    {{ user.username }}
                                {% elif user.email %}
                                    {{ user.email }}
                                {% else %}

                                {% endif %}
                            </span>
                        </a>
                    </span>
                    <div id="accountDropdownMenu" class="menu">
                        <ul>
                            <li><a href="{% url "profile" feature_name="account" %}" class="dropdown-link" title="Аккаунт">Аккаунт</a></li>
                            <li><a href="{% url "profile" feature_name="account"%}" class="dropdown-link" title="Список задач" >Список задач</a></li>
                            <li><a href="{% url "profile" feature_name="account"%}" class="dropdown-link" title="Завантажити" >Завантажити</a></li>
                            <li><a href="{% url "profile" feature_name="account"%}" class="dropdown-link" title="Розв’язки" >Розв’язки</a></li>
                            <li><a href="{% url "profile" feature_name="account"%}" class="dropdown-link" title="Чат з питаннями" >Чат з питаннями</a></li>
                            <li><a href="{% url "profile" feature_name="account"%}" class="dropdown-link" title="Персональні дані" >Персональні дані</a></li>
                            <li><a href="{% url "logout" %}" class="dropdown-link" title="Вийти">Вийти</a></li>
                        </ul>
                    </div>
                </div>
            {% endif %}
        </span>
        <a></a>
        <a></a>
    </div>
    <a></a>
    <a></a>
    <div id="overlay" class="overlay"></div>
</div>
<script>

document.addEventListener("DOMContentLoaded", () => {
    const photo= document.getElementById('account-icon-photo');
});

document.querySelector('.materials-dropdown-trigger').addEventListener('click', function(event) {
    const dropdownMenu = document.getElementById('dropdownMenu');
    dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
    event.stopPropagation();
});

document.querySelector('.account-dropdown-trigger').addEventListener('click', function(event) {
    const dropdownMenu = document.getElementById('accountDropdownMenu');
    dropdownMenu.classList.toggle('open');
    event.stopPropagation();
});

document.addEventListener('click', function() {
    const dropdownMenu = document.getElementById('dropdownMenu');
    const accountDropdownMenu = document.getElementById('accountDropdownMenu');
    dropdownMenu.style.display = 'none';
    accountDropdownMenu.classList.remove('open');
});

let isCheckout = false;
let key = "{{ session.session_key }}";


window.addEventListener('scroll', function() {
    let toolbar = document.querySelector('.toolbar');
    // Check if the page is scrolled more than 50 pixels
    if(window.pageYOffset > 50) {
        // User has scrolled down, shrink the toolbar
        toolbar.classList.remove('large');
        toolbar.classList.add('small');
    } else {
        // User is near the top of the page, expand the toolbar
        toolbar.classList.remove('small');
        toolbar.classList.add('large');
    }
});

function confirmLogout(event) {
    // Show a confirmation dialog
    let confirmation = confirm("Are you sure you want to log out?");

    // If the user clicks "Cancel", prevent the default link action
    if (!confirmation) {
      event.preventDefault();
      return false;
    }
    // If the user confirms, allow the default link action (logout)
    return true;
}

document.getElementById('overlay').addEventListener('click', function() {
    document.getElementById('cartPanel').classList.remove('open');
    document.getElementById('side_acc_wrap').classList.remove('open');
    this.style.display = 'none'; // Hide the overlay
});


function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
</script>
</html>
{% endblock %}